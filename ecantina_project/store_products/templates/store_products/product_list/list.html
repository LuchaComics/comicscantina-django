{% extends 'store_base/base.html' %}
{% load staticfiles %}
{% block content %}

<div class="container main-container headerOffset">

    <!-- Main component call to action -->

    <div class="row">
        <div class="breadcrumbDiv col-lg-12">
            <ul class="breadcrumb">
                <li><a href="index.html">Home</a></li>
                {% if current_category.parent_id == 1 %}<li>Comics</li>{% elif current_category.name == 'Comic' %}<li>Comics</li>{% endif %}
                {% if current_category.name != 'Comic' %}<li class="active">{{ current_category.name }}s</li>{% endif %}
            </ul>
        </div>
    </div>
    <!-- /.row  -->

    <div class="row">

        <!--left column-->

        <div class="col-lg-3 col-md-3 col-sm-12">
            <div class="panel-group" id="accordionNo">
                <!--Category-->
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title"><a data-toggle="collapse" href="#collapseCategory" class="collapseWill">
                            <span class="pull-left"> <i class="fa fa-caret-right"></i></span> Category </a></h4>
                    </div>
                    <div id="collapseCategory" class="panel-collapse collapse in">
                        <div class="panel-body">
                            <ul class="nav nav-pills nav-stacked tree" id="category-list">
                                {% for category in categories %}
                                    {% if category.parent_id == 0 %}
                                        <li class='dropdown-tree {% if category.category_id == current_category.parent_id or category.category_id == current_category.category_id %}active open-tree{% endif %}'>
                                            <a class='dropdown-tree-a'> {{ category.name }} </a>
                                            <ul class='category-level-2 dropdown-menu-tree' id='cat-tree-{{ category.category_id }}'>
                                                <li><a href="/{{ organization.org_id }}/products/list/{{ category.category_id }}" class="{% if current_category.category_id == category.category_id %}active{% endif %}">All {{ category.name }}s</a></li>
                                                {% for subcategory in categories %}
                                                    {% if subcategory.parent_id == category.category_id %}
                                                        <li><a href="/{{ organization.org_id }}/products/list/{{ subcategory.category_id }}" class="{% if subcategory.category_id == current_category.category_id %}active{% endif %}">{{ subcategory.name }}</a></li>
                                                    {% endif %}
                                                {% endfor %}
                                            </ul>
                                        </li>
                                    {% endif %}
                                {% endfor %}

                            </ul>
                        </div>
                    </div>
                </div>
                <!--/Category menu end-->

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title"><a data-toggle="collapse" href="#collapseBrand" class="collapseWill">
                            Brand <span class="pull-left"> <i class="fa fa-caret-right"></i></span> </a></h4>
                    </div>
                    <div id="collapseBrand" class="panel-collapse collapse in">
                        <div class="panel-body smoothscroll maxheight300">
                            {% for brand in brands %}
                            <div class="block-element">
                                <label><input type="checkbox" name="tour" value="0"/> {{ brand.name }}</label>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <!--/brand panel end-->

                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4 class="panel-title"><a data-toggle="collapse" href="#collapseThree" class="collapseWill">
                            Discount <span class="pull-left"> <i class="fa fa-caret-right"></i></span> </a></h4>
                    </div>
                    <div id="collapseThree" class="panel-collapse collapse in">
                        <div class="panel-body">
                            {% for promo in promotions %}
                            <div class="block-element">
                                <label>
                                    <input type="checkbox" name="tour" value="{{ promo.promotion_id }}"/>
                                    {{ promo.name }}
                                    {% if promo.discount_type == 1 %}
                                        ({{ promo.discount|floatformat:"0" }}%)
                                    {% else %}
                                        (%{{ promo.discount|floatformat:"0" }})
                                    {% endif %}
                                </label>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                <!--/discount  panel end-->
            </div>
        </div>

        <!--right column-->
        <div class="col-lg-9 col-md-9 col-sm-12">
            <div class="w100 clearfix category-top">
                <div class="categoryImage">
                    <img src="
                    {% if current_category == 'All Products' %}
                        {% static 'store/img/cat_header_all.jpg' %}
                    {% elif current_category.name == 'Comic' or current_category.parent_id == 1 %}
                        {% static 'store/img/cat_header_comics.jpg' %}
                    {% endif %}" class="img-responsive" alt="img">
                </div>
            </div>
            <!--/.category-top-->

            <div class="w100 productFilter clearfix">
                <p class="pull-left"> Showing <strong>{{ products.count }}</strong> products </p>

                <div class="pull-right ">
                    <div class="change-order pull-right">
                        <select class="form-control" name="orderby">
                            <option selected="selected">Default sorting</option>
                            <option value="popularity">Sort by popularity</option>
                            <option value="rating">Sort by average rating</option>
                            <option value="date">Sort by newness</option>
                            <option value="price">Sort by price: low to high</option>
                            <option value="price-desc">Sort by price: high to low</option>
                        </select>
                    </div>
                    <div class="change-view pull-right">
                        <a href="#" title="Grid" class="grid-view">
                            <i class="fa fa-th-large"></i>
                        </a>
                    </div>
                </div>
            </div>
            <!--/.productFilter-->
            <div class="row  categoryProduct xsResponse clearfix">

                {% for product in products %}
                <!-- item -->
                <div class="item col-sm-4 col-lg-4 col-md-4 col-xs-6">
                    <div class="product">
                        <a class="add-fav tooltipHere" data-toggle="tooltip" data-original-title="Add to Wishlist" data-placement="left">
                            <i class="glyphicon glyphicon-heart"></i>
                        </a>

                        <div class="image">
                            <a href="/{{ organization.org_id }}/products/details/{{ product.product_id }}">
                                <img src="/media/{{ product.image.image }}" alt="img" class="img-responsive">
                            </a>

                            <div class="promotion">
                                <span class="new-product"> NEW</span> {% if product.discount > 0 %}<span class="discount">{% if product.discount_type == 2 %}${% endif %}{{ product.discount }}{% if product.discount_type == 1 %}%{% endif %} OFF</span>{% endif %}
                            </div>
                        </div>
                        <div class="description">
                            <h4><a href="/{{ organization.org_id }}/products/details/{{ product.product_id }}"> {{ product.name }} </a></h4>

                            <div class="grid-description">
                                <p>{{ product.brand }}</p>
                            </div>
                            <div class="list-description">
                                <p> </p>
                            </div>
                            <span class="size"> </span></div>
                        <div class="price"><span>${{ product.price }}</span></div>
                        <div class="action-control"><a class="btn btn-primary"> <span class="add2cart"><i
                                class="glyphicon glyphicon-shopping-cart"> </i> Add to cart </span> </a></div>
                    </div>
                </div>
                <!-- end item -->
                {% endfor %}

            </div>
            <!--/.categoryProduct || product content end-->

            {% load store_products_extras %}

            <div class="w100 categoryFooter">
                <div class="pagination pull-left no-margin-top">
                    <ul class="pagination no-margin-top">
                        {% if products.has_previous %}
                            <li><a href="?page={{ products.previous_page_number }}">«</a></li>
                        {% endif %}

                        {% for page in products.paginator.num_pages|get_range %}
                        <li {% if page == products.number %}class="active"{% endif %}><a href="?page={{ page }}">{{ page }}</a></li>
                        {% endfor %}

                        {% if products.has_next %}
                            <li><a href="?page={{ products.next_page_number }}">»</a></li>
                        {% endif %}
                    </ul>
                </div>
                <div class="pull-right pull-right col-sm-4 col-xs-12 no-padding text-right text-left-xs">
                    <p>Showing {{ products }} results</p>
                </div>
            </div>
            <!--/.categoryFooter-->
        </div>
        <!--/right column end-->
    </div>
    <!-- /.row  -->
</div>
<!-- /main container -->

<div class="gap"></div>



<!----------------------------------------------------------------------------->

<!-- Modal -->
<div id="ajax_modal_placeholder"
   name="ajax_modal_placeholder"></div>
<!-- end modal -->

<!----------------------------------------------------------------------------->

{% include "store_products/product_list/js.html" %}

{% endblock content %}