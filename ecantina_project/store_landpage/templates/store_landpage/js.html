{% load staticfiles %}
{% include 'store_base/receipt_js.html' %}
{% include 'api/wishlist.html' %}
<!-- PAGE -->
<script>    
    var mySwiper = new Swiper('.swiper-container', {
        pagination: '.box-pagination',
        keyboardControl: true,
        paginationClickable: true,
        slidesPerView: 'auto',
        autoResize: true,
        resizeReInit: true,
    })

    $('.prevControl').on('click', function (e) {
        e.preventDefault()
        mySwiper.swipePrev()
    })
    $('.nextControl').on('click', function (e) {
        e.preventDefault()
        mySwiper.swipeNext()
    })
    
    function ajax_favor(product_id) {
        var customer_id = parseInt({{ customer.customer_id }});
        customer_id = isNaN(customer_id) ? 0 : customer_id;
        if (customer_id <= 0) {
            return;
        }
        
        filter_by_product_id(
            product_id,
            function(json_success) {
                $(json_success).each(function(iter,val2){
                    var count = val2['count'];
                                                  
                    // If some results where returned so delete.
                    if (count > 0) {
                        $(val2['results']).each(function(iter2,val){
                            var wishlist_id = val['wishlist_id'];
                            delete_wishlist(wishlist_id, function(json_results) {
                                console.log(json_results); // Do nothing.
                            });
                        });
                    } else { // Nothing was returned so insert.
                        set_wishlist(
                            {
                                'customer': customer_id,
                                'product': product_id,
                            },
                            function(json_success) {
                                console.log(json_success); // Do nothing.
                            },
                            function(json_error) {
                                console.log(json_error); // Do Nothing.
                            }
                        ); // End Set Wishlist
                    }
                });
            },
            function(json_error) {
                console.log(json_error);
            }
        ); // End Filter by Product ID
    }
</script>